<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>OpenCV鱼眼相机标定模型 | Untitled.</title>

  
  <meta name="author" content="Jingyi Yu">
  

  
  <meta name="description" content="本文对OpenCV鱼眼相机标定模型进行了整理">
  

  
  
  <meta name="keywords" content="Calibration,Fisheye">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="OpenCV鱼眼相机标定模型"/>

  <meta property="og:site_name" content="Untitled."/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Untitled." type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Untitled.</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>OpenCV鱼眼相机标定模型</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2022/11/10/Principle-OpenCV 鱼眼标定模型/" rel="bookmark">
        <time class="entry-date published" datetime="2022-11-10T09:51:24.000Z">
          2022-11-10
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>本文对OpenCV鱼眼相机标定模型进行了整理</p>
<span id="more"></span>



<h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>X是世界坐标系中一点P的坐标，R是旋转矩阵，T是平移向量，点P在相机坐标系下的坐标可表示为</p>
<p>x，y，z是的三个坐标，可表示为</p>
<p>P点小孔投影的坐标为，其中</p>
<p>鱼眼畸变模型</p>
<p>畸变点的坐标</p>
<p>最终的像素坐标系坐标</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><p><img src="https://cdn.nlark.com/yuque/0/2022/png/478741/1666851400935-0c52ce5b-864c-4d5e-9cd7-936cd71587b1.png#clientId=u2530e7df-30b1-4&from=paste&height=191&id=u2df9f0b9&originHeight=636&originWidth=1504&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32824&status=done&style=none&taskId=u8820566f-b600-4b9e-a0f5-c24f4bb9bcf&title=&width=452" alt="image.png"></p>
<h2 id="1-cv-fisheye-calibrate"><a href="#1-cv-fisheye-calibrate" class="headerlink" title="1.cv::fisheye::calibrate()"></a>1.cv::fisheye::calibrate()</h2><p>首先使用标定板标定相机。该函数输入角点，返回鱼眼相机内参K、D和外参R、T。<br>其中，K是33的相机内参矩阵<br>D是畸变系数<br>R是旋转向量<br>T是平移向量<br><img src="https://cdn.nlark.com/yuque/0/2022/png/478741/1666792469897-56f13227-7745-497b-809d-a51c0e5502c6.png#clientId=u4d203810-b609-4&from=paste&height=379&id=u3ac436bc&originHeight=568&originWidth=1479&originalType=binary&ratio=1&rotation=0&showTitle=false&size=129384&status=done&style=none&taskId=ud749b2c6-819d-4d34-ae99-d7300fccffe&title=&width=986" alt="image.png"></p>
<h2 id="2-cv-getOptimalNewCameraMatrix"><a href="#2-cv-getOptimalNewCameraMatrix" class="headerlink" title="2.cv::getOptimalNewCameraMatrix"></a>2.cv::getOptimalNewCameraMatrix</h2><p>根据比例因子返回新的相机内参矩阵<br><img src="https://cdn.nlark.com/yuque/0/2022/png/478741/1666851321370-3fedf064-3060-4fa4-b459-5d69e52fdb04.png#clientId=u86beb428-ab51-4&from=drop&id=u25272227&originHeight=656&originWidth=1966&originalType=binary&ratio=1&rotation=0&showTitle=false&size=415026&status=done&style=none&taskId=uf49a338d-63df-4f71-a224-81994c3d30a&title=" alt="截屏2022-10-27 14.15.17.png"></p>
<h2 id="3-cv-fishheye-initUndistortRectifyMap"><a href="#3-cv-fishheye-initUndistortRectifyMap" class="headerlink" title="3.cv::fishheye::initUndistortRectifyMap"></a>3.cv::fishheye::initUndistortRectifyMap</h2><blockquote>
<p>Computes undistortion and rectification maps for image transform by cv::remap(). If D is empty zero distortion is used, if R or P is empty identity matrixes are used.</p>
</blockquote>
<p>该函数计算原始图像和矫正图像之间的转换关系，输入是鱼眼相机内参，输出是两者间的映射关系map1和map2。<br><img src="https://cdn.nlark.com/yuque/0/2022/png/478741/1666837089400-15675ff4-5022-4ecc-869e-89f33f338c98.png#clientId=u86beb428-ab51-4&from=drop&id=u6b7eca60&originHeight=706&originWidth=1974&originalType=binary&ratio=1&rotation=0&showTitle=false&size=381747&status=done&style=none&taskId=u2aa4ac72-67c0-4f60-ae75-08c4e17990e&title=" alt="截屏2022-10-27 10.18.05.png"></p>
<h2 id="4-cv-remap"><a href="#4-cv-remap" class="headerlink" title="4.cv::remap"></a>4.cv::remap</h2><blockquote>
<p>The function remap transforms the source image using the specified map:</p>
<p>where values of pixels with non-integer coordinates are computed using one of available interpolation methods. mapx and mapy can be encoded as separate floating-point maps in map1 and map2 respectively, or interleaved floating-point maps of (x,y) in map1, or fixed-point maps created by using convertMaps. The reason you might want to convert from floating to fixed-point representations of a map is that they can yield much faster (2x) remapping operations. In the converted case, map1 contains pairs (cvFloor(x), cvFloor(y)) and map2 contains indices in a table of interpolation coefficients.</p>
</blockquote>
<p>使用map1和map2进行矫正<br><img src="https://cdn.nlark.com/yuque/0/2022/png/478741/1666837346784-39468276-4eae-4a8d-8668-6a7d5cb2e763.png#clientId=u86beb428-ab51-4&from=drop&id=uac6e461a&originHeight=652&originWidth=1968&originalType=binary&ratio=1&rotation=0&showTitle=false&size=345482&status=done&style=none&taskId=u91754d45-248e-418b-ba9f-18eebc55db4&title=" alt="截屏2022-10-27 10.22.20.png"></p>
<h2 id="5-CUDA加速"><a href="#5-CUDA加速" class="headerlink" title="5.CUDA加速"></a>5.CUDA加速</h2><h1 id="基于OpenCV双目模型的虚拟相机方案"><a href="#基于OpenCV双目模型的虚拟相机方案" class="headerlink" title="基于OpenCV双目模型的虚拟相机方案"></a>基于OpenCV双目模型的虚拟相机方案</h1>
      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Principle/">Principle</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/Calibration/">Calibration</a><a href="/tags/Fisheye/">Fisheye</a>
    </span>
    

    </div>

    
  </div>
</article>

  









    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2023 Jingyi Yu
    
  </p>
</footer>
    
    
  </div>
</div>
</body>
</html>